<MudStack Style="width: 100%">
    <MudFileUpload T="IBrowserFile"
                   @ref="@FileUpload"
                   OnFilesChanged="OnInputFileChanged"
                   Hidden="@IsFileUploadHidden"
                   accept="@Constants.Uploads.ImageExtensions"
                   InputClass="absolute mud-width-full mud-height-full overflow-hidden z-10"
                   InputStyle="opacity:0"
                   tabindex="-1"
                   @ondrop="@ClearDragClass"
                   @ondragenter="@SetDragClass"
                   @ondragleave="@ClearDragClass"
                   @ondragend="@ClearDragClass">
        <ActivatorContent>
            @if (!IsFileUploadHidden)
            {
                <MudPaper Height="235px"
                          Outlined="true"
                          Class="@DragClass">
                    <MudText Typo="Typo.h6">
                        <div>Drag and drop your image file here or click to upload your image.</div>
                    </MudText>
                </MudPaper>
            }
        </ActivatorContent>
    </MudFileUpload>

    @if (IsFileUploadHidden)
    {
        <MudPaper Height="235px"
                  Outlined="true"
                  Class="@DragClass">
            <div class="field-body">
                <Cropper @ref="Cropper" Source="@ImagePreviewUrl" SelectionChanged="@OnSelectionChanged" Style="aspect-ratio: 16 / 9; height: 100%;" />
            </div>
        </MudPaper>
    }

    <div class="modal-footer pa-0 border-0">
        <MudToolBar Gutters="@false" Class="relative d-flex justify-end gap-4">
            <MudButton Color="Color.Primary"
                       DropShadow="false"
                       Class="btn btn--sm"
                       Disabled="@string.IsNullOrEmpty(ImagePreviewUrl)"
                       OnClick="@ClearImage"
                       Variant="Variant.Outlined">
                Clear
            </MudButton>
            <MudButton Color="Color.Primary"
                       DropShadow="false"
                       Class="btn btn--sm"
                       Disabled="@(!IsCropComplete || string.IsNullOrEmpty(ImagePreviewUrl))"
                       OnClick="@UploadImage"
                       Variant="Variant.Filled">
                Upload
            </MudButton>
        </MudToolBar>
    </div>
</MudStack>